# 5. CommercioSign

## 5.2 Simple Electronic Signature with a Self Signed Certificate in your DDO

### Use cases
Takes the given _data_, converts it to an alphabetically sorted JSON object and signs its content using the given _wallet_.

### Tools
The CommercioSDK, our own open source tool to format transactions to Commercio.network

### Functions and APIs
- SignHelper _signSorted_
 
- CertificateHelper _getPem_ (only for Kotlin)
  

###  Background
From Wikipedia:
> In cryptography and computer security, a self-signed certificate is a certificate that is not signed by a certificate authority (CA).

> Privacy-Enhanced Mail (PEM) is a de facto file format for storing and sending cryptographic keys, certificates, and other data, based on a set of 1993 IETF standards defining "privacy-enhanced mail.

### Step by step sequence

#### Dart
1. Generate the wallet;
2. Finally, execute the SignHelper _signSorted_ to sign your data.

#### Kotlin

##### signSorted
1. Generate the wallet;
2. Execute the SignHelper _signSorted_ to sign your data. The resulting byte array represents the signature in ASN.1 DER format.

##### getPEM
1. Generate the wallet;
4. Generate rsaKeyPair using KeysHelper _generateRsaKeyPair_;
5. Create X509 self-signed certificate using CertificateHelper _x509certificateFromWallet_;
6. Execute CertificateHelper _getPem_ to get PEM encoded certificate.

### Code Examples
Here's an example of the implemetation in all the available languages.

#### Dart
```dart
final wallet = Wallet.derive(mnemonic, networkInfo);

final data = {
  "name": "John",
  "surname": "Smith",
  "email": "jsmith@test.com"
};

await SignHelper.signSorted(data, wallet);
```
#### Kotlin
```kotlin
val data ="\"name\": \"John\", \"surname\": \"Smith\",\"email\": \"jsmith@test.com\""

val wallet = Wallet.derive(mnemonic, networkInfo)

val signedData = SignHelper.signSorted(data, wallet) 
```

```kotlin
val wallet = Wallet.derive(mnemonic, networkInfo)

val rsaKeyPair = KeysHelper.generateRsaKeyPair()

val certificate = CertificateHelper.x509certificateFromWallet(wallet.bech32Address, rsaKeyPair)

val pemCertificate = CertificateHelper.getPem(certificate)
```

